dataset_name_cleaned: cleaned_dataset
dataset_name_customer: customer_agg
dataset_name_rfm: RFM

stage_inicial: inicial
stage_final: final

# =========================
# FEATURE ENGINEERING (Paso 3) - Ajustado a tus columnas reales
# =========================
feature_engineering:
  # --- Configuración de RFM ---
  rfm:
    # Si es null, se usa (max(TransactionDate) + 1 día)
    reference_date: null
    rfm_bins: 5
    columns:
      customer_id: CustomerID
      transaction_id: TransactionID
      transaction_date: TransactionDate
      amount: TransactionAmount (INR)

  # --- Segmentación basada en scores RFM ---
  rfm_segments:
    use_standard_segments: true

  # --- Features de valor de cliente (CLV simple, etc.) ---
  customer_value:
    annualization_factor: 12

  # --- Features específicas para detección de fraude ---
  fraud_detection:
    rapid_transaction_threshold_hours: 0.5
    high_value_threshold: null
    anomaly_zscore_threshold: 3
    columns:
      customer_id: CustomerID
      transaction_date: TransactionDate
      amount: TransactionAmount (INR)

# =========================
# DATA CLEANING / OUTLIERS
# =========================
data_cleaning:
  required_columns:
    - CustomerID
    - TransactionID
    - TransactionDate
    - Amount

  outlier_treatment:
    Amount:
      method: percentile     # iqr | percentile | zscore
      action: winsorize      # cap | remove | winsorize
      lower_percentile: 0.01
      upper_percentile: 0.99

  datetime:
    columns: [TransactionDate]
    infer_datetime_format: true
    utc: false

# ===========================================================
# Modelos de clasificación – rutas de guardado de modelos
# ===========================================================

# --- KNeighborsClassifier ---
knn_model_path: "data/06_models/clasificacion/knn_model.pkl"

# --- DecisionTreeClassifier ---
dt_model_path: "data/06_models/clasificacion/dt_model.pkl"

# --- RandomForestClassifier ---
rf_model_path: "data/06_models/clasificacion/rf_model.pkl"

# --- MLPClassifier ---
mlp_model_path: "data/06_models/clasificacion/mlp_model.pkl"

# --- XGBClassifier ---
xgb_model_path: "data/06_models/clasificacion/xgb_model.pkl"

# ===========================================================
# Modelos de regresión – rutas de guardado de modelos
# ===========================================================

# --- Linear Regression ---
linear_model_path: "data/06_models/regresion/linear_model.pkl"

# --- Ridge Regression ---
ridge_model_path: "data/06_models/regresion/ridge_model.pkl"

# --- Lasso Regression ---
lasso_model_path: "data/06_models/regresion/lasso_model.pkl"

# --- Random Forest Regressor ---
rf_regressor_model_path: "data/06_models/regresion/rf_regressor_model.pkl"

# --- XGBoost Regressor ---
xgb_regressor_model_path: "data/06_models/regresion/xgb_regressor_model.pkl"

#Para clustering
#dbscan
pca_dbscan:
  n_sample: 50000
  features:
    - AmountZScoreByLocation
    - IsAnomaly
    - IsLateNight
    - IsWeekend
  target: is_fraud

  dbscan:
    eps: 0.2
    min_samples: 5

  outputs:
    figure_path: data/07_model_output/clustering/dbscan_pca_clusters.png
#optics
pca_optics:
  n_sample: 50000

  features:
    - AmountZScoreByLocation
    - IsAnomaly
    - IsLateNight
    - IsWeekend

  target: is_fraud

  optics:
    min_samples: 50
    xi: 0.05
    min_cluster_size: 0.02

  outputs:
    figure_path: data/07_model_output/clustering/optics_pca_clusters.png
#pca kameans
pca_kmeans:
  n_sample: 50000

  features:
    - AmountZScoreByLocation
    - IsAnomaly
    - IsLateNight
    - IsWeekend

  target: is_fraud

  kmeans:
    k_range: [2, 3, 4, 5, 6, 7, 8, 9, 10]
    k_final: 6

  outputs:
    figure_path: data/07_model_output/clustering/kmeans_pca_clusters.png

# =========================
# t-SNE y asignación de clusters K-Means
# =========================
clustering:
  target: is_fraud
  features:
    - AmountZScoreByLocation
    - IsAnomaly
    - IsLateNight
    - IsWeekend

  tsne:
    perplexity: 50
    learning_rate: auto
    n_iter: 1000

#Reporting Nuevo - EV2 (Todavia no se elimina el de arriba porque falta comprobar que no rompera código :D)
reporting_config:
  classification_results_path: data/07_model_output/clasificacion
  regression_results_path: data/07_model_output/regresion
  classification_images_path: data/08_reporting/clasificacion
  regression_images_path: data/08_reporting/regresion
  clustering_images_path: data/08_reporting/clustering
  dashboard_output_path: data/08_reporting/dashboard