# ========================
# Datasets en 01_raw
# ========================

# ==== inputs =====
#Tablas base del proyecto información cruda 
bank_customer_transactions:
  type: pandas.CSVDataset
  filepath: data/01_raw/bank_customer_transactions.csv

cleaned_dataset:
  type: pandas.CSVDataset
  filepath: data/01_raw/cleaned_dataset.csv

customer_agg:
  type: pandas.CSVDataset
  filepath: data/01_raw/customer_agg.csv

customers:
  type: pandas.CSVDataset
  filepath: data/01_raw/customers.csv

foreign_customer_dataset:
  type: pandas.CSVDataset
  filepath: data/01_raw/foreign_customer_dataset.csv

fraud_dataset:
  type: pandas.CSVDataset
  filepath: data/01_raw/fraud_dataset.csv

RFM:
  type: pandas.CSVDataset
  filepath: data/01_raw/RFM.csv

transactions:
  type: pandas.CSVDataset
  filepath: data/01_raw/transactions.csv

# === Datasets INTERMEDIATE (output de limpieza) — Parquet + versionado ===
#NO VARIABLES IRRELEVANTES se eliminan variables que podrían tener poca relevancia
NIV_cleaned_dataset:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/NIV_cleaned_dataset.parquet
  versioned: true

NIV_customer_agg:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/NIV_customer_agg.parquet
  versioned: true

NIV_RFM:
  type: pandas.ParquetDataset
  filepath: data/02_intermediate/NIV_RFM.parquet
  versioned: true
# === PRIMARY (datasets transformados) — Parquet + versionado
#Datasets en 
PRI_cleaned:
  type: pandas.ParquetDataset
  filepath: data/03_primary/PRI_cleaned.parquet
  versioned: true

PRI_customer:
  type: pandas.ParquetDataset
  filepath: data/03_primary/PRI_customer.parquet
  versioned: true

PRI_rfm:
  type: pandas.ParquetDataset
  filepath: data/03_primary/PRI_rfm.parquet
  versioned: true

# Dataset integrado (merge de los 3 datasets principales a utilizar)
PRI_full:
  type: pandas.ParquetDataset
  filepath: data/03_primary/PRI_full.parquet
  versioned: true



# === REPORTING (múltiples formatos)
# Reportes “inicial” y “final”: si quieres mantener CSV con latin1, déjalos así.
report_cleaned_inicial:
  type: pandas.CSVDataset
  filepath: data/08_reporting/report_cleaned_inicial.csv
  load_args: { encoding: latin1 }
  save_args: { index: False, encoding: latin1 }

report_customer_inicial:
  type: pandas.CSVDataset
  filepath: data/08_reporting/report_customer_inicial.csv
  load_args: { encoding: latin1 }
  save_args: { index: False, encoding: latin1 }

report_rfm_inicial:
  type: pandas.CSVDataset
  filepath: data/08_reporting/report_rfm_inicial.csv
  load_args: { encoding: latin1 }
  save_args: { index: False, encoding: latin1 }

report_cleaned_final:
  type: pandas.CSVDataset
  filepath: data/08_reporting/report_cleaned_final.csv
  load_args: { encoding: latin1 }
  save_args: { index: False, encoding: latin1 }

report_customer_final:
  type: pandas.CSVDataset
  filepath: data/08_reporting/report_customer_final.csv
  load_args: { encoding: latin1 }
  save_args: { index: False, encoding: latin1 }

report_rfm_final:
  type: pandas.CSVDataset
  filepath: data/08_reporting/report_rfm_final.csv
  load_args: { encoding: latin1 }
  save_args: { index: False, encoding: latin1 }

#Este es el nuevo PRI_FULL pero con las nuevas features creadas a partir de fraud :P
PRI_full_fraud_features:
  type: pandas.ParquetDataset
  filepath: data/03_primary/PRI_full_fraud_features.parquet

# Extras para “excelencia” en reporting
rfm_analysis_report:
  type: pandas.ExcelDataset
  filepath: data/08_reporting/rfm_analysis.xlsx
  save_args: {engine: openpyxl, index: false}

model_metrics:
  type: json.JSONDataset
  filepath: data/08_reporting/model_metrics.json

fraud_alerts:
  type: pandas.CSVDataset
  filepath: data/08_reporting/fraud_alerts.csv
  save_args: { index: False }
